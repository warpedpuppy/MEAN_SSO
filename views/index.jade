extends layout

block content

  script(src="/javascripts/angularApp.js")

  .row
    .col-md-6.col-md-offset-3
      ui-view


  script(type="text/ng-template" id="/enable_account.html")
    .page-header
      h1 Your account has been enabled.
      h2 Welcome, {{ info.username | uppercase}}!

  script(type="text/ng-template" id="/expired.html")
    .page-header
      h1 EXPIRED

  script(type="text/ng-template" id="/protected.html")
    .page-header
      h1 PROTECTED
      h2 message: {{ message_from_server.success }}

  script(type="text/ng-template" id="/pending.html")
    .page-header
      h1 please go to your mail and click the link




  script(type="text/ng-template" id="/home.html")
    .page-header

        h1(ng-show="isLoggedIn()") welcome home {{ currentUser() }}
        h1(ng-hide="isLoggedIn()") you are not logged in.

  script(type="text/ng-template" id="/register.html")
    .page-header
      h1 mean authentication
      p {{ expired_notice }}

    div(ng-show="error" class="alert alert-danger row")
      span {{ error.message }}

    div(ng-show="error" class="alert alert-danger row")
      span {{ error }}

    form(ng-submit="register()",style="margin-top:30px;", name="register_form")
      h3 Register



      .form-group(class="reg_form_input")
        input(id='username_input',ng-pattern="/^[a-zA-Z0-9]*$/",ng-minlength="3",ng-maxlength='20',type="text",class="form-control",placeholder="Username", name='username',ng-model="user.username" username required)/


      .form-group
        div(ng-if="register_form.$pending.usernameExists") checking....
        div(ng-if="register_form.$error.usernameExists") username exists already
        p(class='mini-form orange') input valid? = <code>{{register_form.username.$valid}}</code><br>
        p(class='mini-form orange',id='username_string_length')  >= 3 chars & <=20
        p(class='mini-form orange',id='username_char_check') ✔ only digits and letters, please



      div(class='form-group reg_form_input')
        input(autocomplete="off",class='email_reg_form', type="email",class="form-control",placeholder="Email address",name="email",ng-model="user.email" required)/

      .form-group
        p(class='mini-form') input valid? = <code>{{register_form.email.$valid}}</code><br>

      .form-group(class='form-group reg_form_input')
        input(id='password_input', type="password",class="form-control",name="password",placeholder="Password",ng-model="user.password",ng-pattern="/(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])/",ng-minlength="6",ng-maxlength='20' password required)/

      .form-group
        p(class='mini-form orange') input valid? = <code>{{register_form.password.$valid}}</code><br>
        p(class='mini-form orange',id='password_length_check') ✔ passwords must be >= 6 chars & <=20
        p(class='mini-form orange',id='password_uppercase_check') ✔ passwords must have at least one uppercase
        p(class='mini-form orange',id='password_lowercase_check') ✔ passwords must have at least one lowercase
        p(class='mini-form orange',id='password_number_check') ✔ passwords must have at least one number

      button(type="submit" class="btn btn-primary") Register












  script(type="text/ng-template" id="/login.html")
    .page-header
      h1 mean authentication

    div(ng-show="error" class="alert alert-danger row")
      span {{ error.message }}

    form(ng-submit="logIn()",style="margin-top:30px;")
      h3 Log In

      .form-group
        input(type="text", class="form-control",placeholder="Username",value='test_user',ng-model="user.username")/

      .form-group
        input(type="password",class="form-control",placeholder="Password",ng-model="user.password")/

      button(type="submit" class="btn btn-primary") Log In
